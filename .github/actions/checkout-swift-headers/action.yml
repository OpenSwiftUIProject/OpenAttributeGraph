name: Checkout Swift Headers
description: |
  This action checks-out certain header files from the swiftlang/swift
  repository by running Scripts/clone-swift.sh.

inputs:
  path:
    description: Relative path under $GITHUB_WORKSPACE to place the repository
    required: false
    default: ''
  swift-version:
    description: "Swift version as major.minor (e.g. 6.1). Detected from swift --version if not set."
    required: false
    default: ''

runs:
  using: "composite"
  steps:
    - name: Checkout Swift headers
      run: |
        ARGS=""
        if [ -n "${{ inputs.path }}" ]; then
          ARGS="$ARGS --path ${{ inputs.path }}"
        fi
        if [ -n "${{ inputs.swift-version }}" ]; then
          ARGS="$ARGS --swift-version ${{ inputs.swift-version }}"
        fi
        ./Scripts/clone-swift.sh $ARGS
      shell: bash
